{% extends 'adminTemplate.html.twig' %}

{% block title %}Tableau de bord{% endblock %}

{% block stat %}
   <div class="content-header">
      <div class="container-fluid">
         <div class="row mb-2">
            <div class="col-sm-6">
               <h1 class="m-0 text-dark">Tableau de bord</h1>
            </div>
         </div>
      </div>
   </div>

   <section class="content">
      <div class="container-fluid">
         <div class="row">
            <div class="col-md-6">
               <div class="card">
                  <div class="card-header">
                     <h3 class="card-title">Statistiques des parcs</h3>
                  </div>
                  <div class="card-body">
                     <canvas id="parcsChart"></canvas>
                  </div>
               </div>
            </div>
            <div class="col-md-6">
               <div class="card">
                  <div class="card-header">
                     <h3 class="card-title">Statistiques de superficie</h3>
                  </div>
                  <div class="card-body">
                     <canvas id="superficieChart"></canvas>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>

   <script>
      document.addEventListener('DOMContentLoaded', function () {
         var parcsData = {{ parcsData|raw }} || { labels: [], values: [] };
         var superficieData = {{ superficieData|raw }} || { labels: [], values: [] };

         // Graphique pour les parcs
         var parcsChart = new Chart(document.getElementById('parcsChart').getContext('2d'), {
            type: 'bar',
            data: {
               labels: parcsData.labels,
               datasets: [{
                  label: 'Nombre de parcs',
                  data: parcsData.values,
                  backgroundColor: 'rgba(75, 192, 192, 0.2)',
                  borderColor: 'rgba(75, 192, 192, 1)',
                  borderWidth: 1
               }]
            },
            options: {
               scales: {
                  y: {
                     beginAtZero: true
                  }
               }
            }
         });

         // Graphique pour la superficie
         var superficieChart = new Chart(document.getElementById('superficieChart').getContext('2d'), {
            type: 'bar',
            data: {
               labels: superficieData.labels,
               datasets: [{
                  label: 'Superficie des parcs',
                  data: superficieData.values,
                  backgroundColor: 'rgba(255, 99, 132, 0.2)',
                  borderColor: 'rgba(255, 99, 132, 1)',
                  borderWidth: 1
               }]
            },
            options: {
               scales: {
                  y: {
                     beginAtZero: true
                  }
               }
            }
         });
      });
   </script>
{% endblock %}
